## 安装

```shell
[root@localhost Packages]# dnf -y install bind bind-utils
[root@localhost Packages]# yum install bind*
[root@localhost Packages]# rpm -qa |grep bind 
bind-9.8.2-0.17.rc1.el6.i686 

[root@localhost named]# vim /etc/resolv.conf # 添加DNS服务器
# Generated by NetworkManager
search localdomain
nameserver 192.168.110.192

"/etc/resolv.conf" 5L, 124C written                                                 
[root@localhost named]# setenforce 0 # 关闭SELinux
[root@localhost named]# firewall-cmd  --permanent  --add-service=dns # DNS加入防火墙白名单
success
[root@localhost named]# firewall-cmd --reload
success
[root@localhost named]# systemctl start named # 启动服务
```
## DNS概论

- DNS(Domain Name Server)是域名解析服务器，提供域名和IP地址之间一种相互转换的机制。
- DNS支持两种查询方式
    - 递归查询：DNS服务器之间的查询多为迭代，第二台DNS服
      务器会将第三台DNS的IP地址返回给第一台DNS
    - 迭代查询：DNS客户端发出的会为客户端返回查询最终结果。
      请求一般为递归，DNS服务器
- 网络中为了区别各个主机，必须为每台主机分配一个惟一的地址，这个地址即称为“IP地址”。
- 但这些数字难以记忆，所以就采用“域名”的方式来取代这些数字了。
- 当某台主机要与其他主机通信时，就可以利用主机名称向DNS服务器查询该主机的IP地址
- 在选择域名时必须符合RFC 1123中的规定：域名由所有大写字母（A～Z）、小写字母（a～z）、数字（0～9）和连字符（-）组成。

### 本地DNS解析

- hosts文件是Linux系统中一个负责IP地址与域名快速解析的文件。
- 文件以ASCII格式保存在“/etc”目录下，文件名为“hosts”。
- hosts文件包含了IP地址和主机名之间的映射，还包括主机名的别名。
- hosts文件的格式如下：
    - IP地址	主机名/域名  主机别名
- hosts文件和DNS服务器的比较
    - 默认情况下，系统首先从hosts文件查找解析记录
    - hosts文件只对当前的主机有效
    - hosts文件无法完全取代DNS服务器，只能完成辅助的主机名称解析

### 正向解析和反向解析

- 正向解析：是指域名到IP地址的解析过程。
- 反向解析：是指IP地址到域名的解析过程。

### DNS服务

- 后台进程：named
- 脚本：/etc/rc.d/init.d/named
- 使用端口：53（tcp，udp）
- 所需RPM包：bind-9.3.3-10.el5
- 相关RPM包：bind-chroot
- 配置文件：/var/named/chroot/etc/named.conf
- 相关路径：/var/named/
- 发布：www.isc.org

### DNS的分类

主DNS服务器：一台存储着原始资料的DNS服务器

从DNS服务器：使用自动更新方式从DNS服务器同步数据的DNS服务器。也可以当作备份DNS

缓存服务器：不负责本地缓存，转发客户机的查询请求，同时进行缓存

转发器：转发客户机的查询请求

### DNS命名规范

1. 26个英文字母
2. ”0，1，2，3，4，5，6，7，8，9“十个数字
3. ”-“(英文的连接符)
4. 最长63字节长度

可以在master-view文件上面配置check-names ignore

### DNS的记录类型

##### A记录

​		A（Address）记录是用来指定主机名（或域名）对应的IP地址记录。用户可以将该域名下的网站服务器指向到自己的web server上。同时也可以设置域名的子域名。通俗来说A记录就是服务器的IP,域名绑定A记录就是告诉DNS,当你输入域名的时候给你引导向设置在DNS的A记录所对应的服务器。 简单的说，A记录是指定域名对应的IP地址。

##### NS记录

​		NS（Name Server）记录是域名服务器记录，用来指定该域名由哪个DNS服务器来进行解析。 您注册域名时，总有默认的DNS服务器，每个注册的域名都是由一个DNS域名服务器来进行解析的，DNS服务器NS记录地址一般以以下的形式出现： ns1.domain.com、ns2.domain.com等。 简单的说，NS记录是指定由哪个DNS服务器解析你的域名。

##### MX记录
​		MX（Mail Exchanger）记录是邮件交换记录，它指向一个邮件服务器，用于电子邮件系统发邮件时根据收信人的地址后缀来定位邮件服务器。例如，当Internet上的某用户要发一封信给 user@mydomain.com 时，该用户的邮件系统通过DNS查找mydomain.com这个域名的MX记录，如果MX记录存在， 用户计算机就将邮件发送到MX记录所指定的邮件服务器上， 比A记录多了一个优先级。

##### CNAME记录

​		记录 CNAME（Canonical Name ）别名记录，允许您将多个名字映射到同一台计算机。通常用于同时提供WWW和MAIL服务的计算机。例如，有一台计算机名为 “host.mydomain.com”（A记录），它同时提供WWW和MAIL服务，为了便于用户访问服务。可以为该计算机设置两个别名（CNAME）：WWW和MAIL， 这两个别名的全称就“www.mydomain.com”和“mail.mydomain.com”，实际上他们都指向 “host.mydomain.com”。

##### TXT记录
​		TXT记录，一般指某个主机名或域名的说明，如：admin IN TXT "管理员, 电话：XXXXXXXXXXX"，mail IN TXT "邮件主机，存放在xxx , 管理人：AAA"，Jim IN TXT "contact: abc@mailserver.com"，也就是您可以设置 TXT 内容以便使别人联系到您。 TXT的应用之一，SPF（Sender Policy Framework）反垃圾邮件。SPF是跟DNS相关的一项技术，它的内容写在DNS的TXT类型的记录里面。MX记录的作用是给寄信者指明某个域名的邮件服务器有哪些。SPF的作用跟MX相反，它向收信者表明，哪些邮件服务器是经过某个域名认可会发送邮件的。SPF的作用主要是反垃圾邮件，主要针对那些发信人伪造域名的垃圾邮件。例如：当邮件服务器收到自称发件人是spam@gmail.com的邮件，那么到底它是不是真的gmail.com的邮件服务器发过来的呢，我们可以查询gmail.com的SPF记录，以此防止别人伪造你来发邮件。

##### PTR记录

​		解析IP的指针，反向记录PTR是pointer 的简写。 "PTR"就是"反向DNS",domain name pointer，可以粗略的理解为DNS反向

Domain Name Pointer. 是一个指针记录，用于将一个IP地址映射到对应的主机名,也可以看成是A记录的反向,通过IP访问域名,原来是通过域名访问IP)

##### SOA纪录

​		用于一个区域的开始，SOA记录后的所有信息均是用于控制这个区域的，每个区域数据库文件都必须包谷一个SOA记录，并且必须是其中的第一个资源记录，用以标识DNS服务器管理的起始位置，SOA说明能解析这个区域的dns服务器中哪个是主服务器。

起始授权结构（SOA）
　　指出当前区域内谁是　 主DNS服务器

### 涉及的文件

```
/etc/named.conf              # bind主配置文件
/etc/named.rfc1912.zones     # 定义zone的文件
/etc/rc.d/init.d/named       # bind脚本文件
/etc/rndc.conf               # rndc配置文件
/usr/sbin/named-checkconf    # 检测/etc/named.conf文件语法
/usr/sbin/named-checkzone    # 检测zone和对应zone文件的语法
/usr/sbin/rndc               # 远程dns管理工具
/usr/sbin/rndc-confgen       # 生成rndc密钥
/var/named/named.ca          # 根解析库
/var/named/named.localhost   # 本地主机解析库
/var/named/slaves            # 从ns服务器文件夹
```

可以查看`/usr/share/doc/bind-9.9.4/sample/`下有各种例子可以参考：

```
[root@centos7 sample]#tree
.
├── etc
│   ├── named.conf
│   └── named.rfc1912.zones
└── var
    └── named
        ├── data
        ├── my.external.zone.db
        ├── my.internal.zone.db
        ├── named.ca
        ├── named.empty
        ├── named.localhost
        ├── named.loopback
        └── slaves
            ├── my.ddns.internal.zone.db
            └── my.slave.internal.zone.db1234567891011121314151617
```

根据参考来配置各个文件。

## 编辑配置

### 主配置文件

- Bind的主配置文件是/var/named/chroot/etc/named.conf，该文件只包括Bind的基本配置，并不包含任何DNS区域数据。

- 在主配置文件中主要可分为两部分
    - 全局声明（options）
        - options语句在每个配置文件中只有一处。如果出现多个options,则第一个options的配置有效，并会产生一个警告信息。

    - 区域声明（zone）
        - zone语句作用是定义DNS区域，在此语句中可定义DNS区域选项。

```shell
options {
		listen-on port 53 { 127.0.0.1; };   //named服务监听的端口号以及IP地址。对于端口号不建议修改，但是IP地址默认是127.0.0.1，从这个回环地址上是监听不到任何客户端请求的，因而这里需要改成DNS服务器的静态IP，如“listen-on port 53 {192.168.11.61; }；”，或者是改成“any”，如“listen-on port 53 {any; }；”，表示可以从该服务器的任何一个IP地址上进行监听。（注意，最后的引号不能省略）
		listen-on-v6 port 53 { ::1; }; 
        directory  “/var/named”;
        //相对目录:/var/named/chroot/var/named/
        dump-file "/var/named/data/cache_dump.db";//解析过的内容的缓存
        statistics-file "/var/named/data/named_stats.txt";//静态缓存，一般不用
        memstatistics-file "/var/named/data/named_mem_stats.txt"; //静态缓存，放内存里的，一般不用。
        allow-query { localhost; };     //允许DNS查询的客户端地址。默认值localhost表示只接受本地查询，这很明显不符合要求，需要将之修改成指定的IP网段，如“allow-query { 192.168.11.0/24; }；”，或是改成“any”，如“allow-query { any; }；”，表示可以接收所有主机的DNS查询请求。 
        recursion yes;        //允许递归查询，这一项一般不用修改。
};
dnssec-enable yes; //dns加密
dnssec-validation yes;     //dns加密高级算法
dnssec-lookaside auto; //dns加密相关东西

directory：指定zone file的存放位置。
dump-file：定义服务器存放数据库的路径。
statistics-file：设置服务器统计信息文件的路径。
forward：设置转发方式。
forwarders：指定其上级域名服务器
allow-query：指定允许向其提交请求的客户
allow-transfer：指定允许复制zone数据的主机
allow-recursion：递归查询
```

#### 设置根区域

```shell
当DNS服务器处理递归查询时，如果本地区域文件不能进行查询的解析，就会转到根DNS服务器查询，所以在主配置文件named.conf文件中还要定义根区域。
	logging { 
		channel default_debug { 
		file "data/named.run"; //运行状态文件
		severity dynamic; 
	}; 

	zone "." { //表示这个区域的名称是“.”，“.”就是根域，也就是整个域名系统的最高级。
		type hint;	 //表示区域类型。hint表示根域，master表示主域，slave表示从域。对于我们自己创建的区域，类型一般都是master。
		file "named.ca";   //表示这个区域的名称是“.”，“.”就是根域，也就是整个域名系统的最高级。
	};
type:设置域的类型
file:设置根服务列表文件名
include "/etc/named.rfc1912.zones";   //其余区域的配置都在这个文件中定义
include "/etc/named.root.key"; 
```

#### 设置主区域

```shell
主区域用来保存DNS服务器某个区域（如：example.com）的数据信息。 
	zone "example.com" IN { 
		type master;
		file "example.com.zone"; 
		allow-transfer { 192.168.0.1; };
		allow-query { 192.168.0.2;192.168.0.3; };
	};
type:设置域名服务器的类型为主域名服务器
file :设置主区域文件的名称
allow-transfer:设置从域名服务器的地址。
```

#### 设置反向解析区域

```shell
在大部分的DNS查询中，DNS客户端一般执行正向查找，即根据计算机的DNS域名查询对应的IP地址。但在某些特殊的应用场合中（如判断IP地址所对应的域名是否合法），也会使用到通过IP地址查询对应DNS域名的情况（也称为反向查找）。
	zone “0.168.192.in-addr.arpa" {
		type master; 
		file "192.168.0.rev"; 
		allow-transfer { 192.168.0.20; };
	};
注意：在DNS标准中定义了固定格式的反向解析区域：反顺序网络地址.in-addr.arpa ，上例中，域所在的子网为192.168.0.0/24,故完整的反向解析域名为：0.168.192.in-addr.arpa
```

#### 根服务器信息文件named.ca

- named.ca是一个非常重要的文件，该文件包含了Internet的根服务器名字和地址。
- Bind接到客户端主机的查询请求时，如果在Cache中找不到相应的数据，就会通过根服务器进行逐级查询。
- 由于named.ca文件经常会随着根服务器的变化而发生变化，因此建议最好从国际互联网络信息中心（InterNIC）的FTP服务器下载最新的版本。
- 下载地址为：ftp://ftp.rs.internic.net/domain/named.root。
- 下载完后，应将该文件改名为named.ca，并复制到“/var/named/chroot/var/named/”目录下。

```shell
[root@localhost etc]# cat /var/named/named.ca 
其中主要也是列出了19台根服务器的地址（除了原先的13台根服务器之外，又增加了6台使用Ipv6地址的根服务器）。  
A.ROOT-SERVERS.NET. 3600000 IN A 198.41.0.4 
A.ROOT-SERVERS.NET. 3600000 IN AAAA 2001:503:ba3e::2:30 
B.ROOT-SERVERS.NET. 3600000 IN A 192.228.79.201 
C.ROOT-SERVERS.NET. 3600000 IN A 192.33.4.12 
D.ROOT-SERVERS.NET. 3600000 IN A 128.8.10.90 
E.ROOT-SERVERS.NET. 3600000 IN A 192.203.230.10 
F.ROOT-SERVERS.NET. 3600000 IN A 192.5.5.241 
F.ROOT-SERVERS.NET. 3600000 IN AAAA 2001:500:2f::f 
G.ROOT-SERVERS.NET. 3600000 IN A 192.112.36.4 
H.ROOT-SERVERS.NET. 3600000 IN A 128.63.2.53 
H.ROOT-SERVERS.NET. 3600000 IN AAAA 2001:500:1::803f:235 
I.ROOT-SERVERS.NET. 3600000 IN A 192.36.148.17 
J.ROOT-SERVERS.NET. 3600000 IN A 192.58.128.30 
J.ROOT-SERVERS.NET. 3600000 IN AAAA 2001:503:c27::2:30 
K.ROOT-SERVERS.NET. 3600000 IN A 193.0.14.129 
K.ROOT-SERVERS.NET. 3600000 IN AAAA 2001:7fd::1 
L.ROOT-SERVERS.NET. 3600000 IN A 199.7.83.42 
M.ROOT-SERVERS.NET. 3600000 IN A 202.12.27.33 
M.ROOT-SERVERS.NET. 3600000 IN AAAA 2001:dc3::35 

;; Query time: 147 msec 
;; SERVER: 198.41.0.4#53(198.41.0.4) 
;; WHEN: Mon Feb 18 13:29:18 2008 
;; MSG SIZE rcvd: 615 

```



### 区域文件

- 一个区域内的所有数据（包括主机名，对应IP地址、辅助服务器与主服务器刷新间隔和过期时间等）必须存放在DNS服务器内，而用来存放这些数据的文件就称为区域文件（区域数据文件使用“;” 符号注释）。
- DNS服务器的区域数据文件一般存放在/var/named/chroot/var/named目录下。
- @取代在/etc/named.conf中指定的域名。

#### 正向解析区域文件

```shell
[root@localhost ~]# cat /etc/named.conf
options {
        listen-on port 53 { 192.168.10.2; };
        listen-on-v6 port 53 { ::1; };
        directory "/var/named";
        dump-file "/var/named/data/cache_dump.db";
        statistics-file "/var/named/data/named_stats.txt";
        memstatistics-file "/var/named/data/named_mem_stats.txt";
        allow-query { any; };
        recursion yes;


        dnssec-enable yes;
        dnssec-validation no;
        dnssec-lookaside auto;


        /* Path to ISC DLV key */
        bindkeys-file "/etc/named.iscdlv.key";


        managed-keys-directory "/var/named/dynamic";
};


logging {
        channel default_debug {
                file "data/named.run";
                severity dynamic;
        };
};


zone "." IN {
        type hint;
        file "named.ca";
};


include "/etc/named.rfc1912.zones";
include "/etc/named.root.key";

```

```shell
[root@localhost ~]# cat /etc/named.rfc1912.zones
zone "jiuxun.com" IN {
        type master;
        file "jiuxun.com.zone";
        allow-update { none; };
};

zone "10.168.192.in-addr.arpa" IN {
        type master;
        file "192.168.10.arpa";
        allow-update { none; };
};
```

数据文件默认都存放在/var/named目录中。数据文件中有一部分固定的信息，如果我们自己手工输入的话比较麻烦，在/var/named目录中有一个名为named.localhost的文件，我们可以用它作为模板，将它直接复制过来修改使用。

`cp /var/named/named.localhost /var/named/example.com.zone`

由于数据文件要被named服务调用，所以必须要保证named服务对数据文件具有读取权限，但默认情况下named服务对这个由我们复制出来的数据文件是没有读取权限的：
下面有两种方法可以解决这个问题：
一是修改数据文件的权限，让其它用户也具有读取权限
二是将数据文件的所属组改为named：

#### 反向解析区域文件

- 反向解析区域文件的结构和格式与区域文件类似，只不过它的主要内容是建立IP地址映射到DNS域名的指针PTR资源记录。
- 注意：在反向解析区域文件中必须包括SOA初始授权记录与NS记录。

```shell
在var/named/chroot/var/named/192.168.0.arpa文件中定义反向解析区域。
$TTL    38400 ;生存期 
@   IN  SOA  dns.example.com.  admin.example.com. (
			2005090503  ;序列号
			3600              ;刷新时间
			300    	        ;重试时间
			604800           ;过期时间
			60                   ;宣布无此域名
 )
@	IN	 	NS	dns.example.com.
20     IN		PTR	dns.example.com.
20	IN		PTR	www.example.com.
21	IN		PTR	mail.example.com.
```

```shell
区域名称：是网络地址的反码.in-addr.arpa.

192.168.111. –> 111.168.192.in-addr.arpa.

配置方法：

先在/etc/named.rfc1512.zones文件下插入下面内容：
zone "Reverse_Net_Addr.in-addr.arpa" IN {
    type {master|slave|forward};
    file "Net_Addr.zone"
}
例子：
zone "111.168.192.in-addr.arpa" IN {
    type master;
    file "192.168.111.zone";
};
配置/var/named/ZONE_NAME.zone
不需要MX、A、AAAA，要有NS记录，以PTR记录为主。
```



#### 实现负载均衡功能

- DNS负载均衡的优点是经济简单易行，它在DNS服务器中为同一个域名配置多个IP地址（即为一个主机名设置多条A资源记录），在应答DNS查询时，DNS服务器对每个查询将以DNS文件中主机记录的IP地址按顺序返回不同的解析结果，将客户端的访问引导到不同的计算机上去，使得不同的客户端访问不同的服务器，从而达到负载均衡的目的。
- 例如，在企业网中需要使用3台内容相同的FTP服务器共同承担客户对FTP的访问，它们的IP地址分别对应192.168.0.11、192.168.0.12和192.168.0.13。现只要在DNS服务器的区域文件中加入以下3条A资源记录，就可以实现3台FTP服务器网络负载均衡功能。

```shell
	ftp  	0	     IN	A	192.168.0.11
	ftp  	0	     IN	A	192.168.0.12
	ftp  	0	     IN	A	192.168.0.13
```

#### 实现直接解析域名

DNS服务器默认只能解析完全规范域名FQDN，不能直接将域解析成IP地址。为了方便用户访问，可以在DNS服务器的区域文件中加入下面一条特殊的A资源记录，以便支持实现直接解析域名功能。

```shell
	example.com.     IN      A       192.168.0.20
	或
	@               	IN      A       192.168.0.20
```

#### 实现泛域名的解析

泛域名是指一个域名下的所有主机和子域名都被解析到同一个IP地址上 。	可以在DNS服务器的区域文件末尾加入下面一条特殊的A资源记录（符号“*”是代表任何字符的通配符），以便支持实现泛域名解析功能。

```shell
*.example.com.   IN    A       192.168.0.20
或

*	           IN      A       192.168.0.20
```

### 主要名称服务器的测试

#### BIND语法检查工具

- 在BIND出错时使用如下工具：
- named-checkconf
    - 默认检查的配置文件是 /etc/named.conf
- named-checkzone  域   Zone文件名
    - 检查一个文件的配置

#### 测试前的准备

- 启动DNS服务
    - /etc/rc.d/init.d/named start
- 配置/etc/resolv.conf

#### 使用nslookup程序测试

- 非交互式通常用于返回单块数据的情况，其命令格式为：
    - nslookup [-选项] 需查询的域名 [DNS服务器地址]
- 交互式通常用于返回多块数据的情况，其命令格式为：
    - nslookup [- DNS服务器地址]

#### 使用host程序测试

- host  [ip/域名]  [DNS服务器的IP]



## 配置辅助名称服务器

- 辅助名称服务器也可以向客户机提供域名解析功能，但它的数据不是直接输入的，而是从主要名称服务器或其他的辅助名称服务器中复制过来的，只是一份副本，所以辅助名称服务器中的数据无法被修改。在一个区域中设置多台辅助名称服务器具有以下优点。
- 提供容错能力。当主要名称服务器发生故障时，由辅助名称服务器提供服务。
- 分担主要名称服务器的负担。在DNS客户端较多的情况下，通过架设辅助名称服务器完成对客户端的查询服务，可以有效地减轻主要名称服务器的负担。
- 加快查询的速度。例如，一个公司在远地有一个与总公司网络相连的分公司网络，这时可以在该处设置一台辅助名称服务器，让该分公司的DNS客户端直接向此辅助名称服务器进行查询，而不需要通过速度较慢的广域网向总公司的DNS服务器查询，减少用于DNS查询的外网通信量。

```shell
辅助名称服务器的主配置文件是/etc/named.conf，也需要设置服务器的选项和根区域，方法与配置主要名称服务器的方法相同。
	zone "example.com" { 
		type slave;
		file "slaves/example.com.zone";
		masters { 192.168.0.20; };
	};
type:设置辅助名称服务器的类型
file:设置同步后的zone文件存放位置
masters:指定主名称服务器的地址。
```

## 缓存Cache-only服务器

- Cache-only服务器是很特殊的DNS服务器，它本身并不管理任何区域，但是DNS客户端仍然可以向它请求查询。
- Cache-only服务器类似于代理服务器，它没有自己的域名数据库，而是将所有查询转发到其他DNS服务器处理。
- 当Cache-only服务器收到查询结果后，除了返回给客户机外，还会将结果保存在缓存中。当下一个DNS客户端再查询相同的域名数据时，就可以从高速缓存里查出答案，加快DNS客户端的查询速度。

### 配置缓存Cache-only服务器

```shell
修改主配置文件/var/named/chroot/etc/named.conf具体的代码如下。
	options {
		directory "/var/named";
		dump-file "/var/named/data/cache_dump.db";
		statistics-file /var/named/data/named_stats.txt";
		forward only;
		forwarders { 192.168.0.20;61.139.2.69; };
	};
forward  only:设置本DNS服务器只作转发
forwarders:定义将客户机的查询转发到哪些DNS服务器，可以为多个IP地址。
```

## ACL

BIND支持Access Control Lists（访问控制列表），ACL可以使BIND的访问控制便于维护。

```shell
例acl query { 192.168.0.0/24;192.168.1.0/24; };	
options {
      	directory “/var/named”;
      	dump-file "/var/named/data/cache_dump.db";
      	statistics-file "/var/named/data/named_stats.txt";
		allow-query { query; };
		allow-transfer { query; };
	};               
```

## DNS命令

### HOST

```
[root@mysql01 ~]# host baidu.com
baidu.com has address 39.156.69.79
baidu.com has address 220.181.38.148
baidu.com mail is handled by 20 mx50.baidu.com.
baidu.com mail is handled by 15 mx.n.shifen.com.
baidu.com mail is handled by 20 mx1.baidu.com.
baidu.com mail is handled by 20 jpmx.baidu.com.
baidu.com mail is handled by 10 mx.maillb.baidu.com.
```

### DIG

```
[root@mysql01 ~]# dig baidu.com

; <<>> DiG 9.11.4-P2-RedHat-9.11.4-16.P2.el8 <<>> baidu.com
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 39759
;; flags: qr rd ra; QUERY: 1, ANSWER: 2, AUTHORITY: 0, ADDITIONAL: 1

;; OPT PSEUDOSECTION:
; EDNS: version: 0, flags:; MBZ: 0x0005, udp: 4096
; COOKIE: a90f0c2d0b460a4d (echoed)
;; QUESTION SECTION:
;baidu.com.                     IN      A

;; ANSWER SECTION:
baidu.com.              5       IN      A       220.181.38.148
baidu.com.              5       IN      A       39.156.69.79

;; Query time: 91 msec
;; SERVER: 192.168.110.2#53(192.168.110.2)
;; WHEN: Sun Feb 16 07:24:48 EST 2020
;; MSG SIZE  rcvd: 82

[root@mysql01 ~]# 
```

### NSLOOKUP

```
[root@mysql01 ~]# nslookup baidu.com
Server:         192.168.110.2
Address:        192.168.110.2#53

Non-authoritative answer:
Name:   baidu.com
Address: 220.181.38.148
Name:   baidu.com
Address: 39.156.69.79
```



BIND是DNS协议的一种实现。BIND包含了一个DNS Server（服务名叫named）,用来解析主机名到ip地址；一个解析库；一些辅助工具，还有一个安全目录工具，分别属于下面几个包：

```
bind：包里主要包含：
    named DNS服务
    named-chkconfig（named.conf文件检查工具）
    named-checkzone(zone文件检车工具）
    rndc（本地和远程dns控制工具）
bind-libs：named DNS服务的库
bind-utils：包含一系列辅助工具来测试
    host
    dig
    nslookup
    nsupdate
bind-chroot：切根程序，用来切换默认目录到另外一个深层的安全的目录/var/named/chroot，类似于前面光盘进入救援模式的那种情况。123456789101112
```











